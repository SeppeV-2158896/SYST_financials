{% extends "base.html" %}
{% load static %}
{% load dict_filters %}

{% block content %}
<div class="max-w-4xl mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4">{{ header }}</h1>

    <form method="post" action="{% url 'financial_overview' %}">
        {% csrf_token %}

        <!-- Basic Questions -->
        <div class="mb-6">
            <h2 class="text-xl font-semibold mb-2">Basic Information</h2>
            {% for question in basic_questions %}
                <label for="basic_question{{ forloop.counter }}" class="block font-medium">{{ question.question_text }}</label>
                <input class="w-full p-2 border border-gray-300 rounded mb-3"
                       id="basic_question{{ forloop.counter }}"
                       name="basic_question{{ forloop.counter }}"
                       type="text"
                       value="{% if question.question_text == 'Email address' %}{{ user_data.email }}
                              {% elif question.question_text == 'Faculty of student' %}{{ user_data.faculty }}
                              {% elif question.question_text == 'Amount of ECTS this year' %}{{ user_data.ects_amount }}
                              {% elif question.question_text == 'Domicile' %}{{ user_data.domicile }}
                              {% endif %}">
            {% endfor %}
        </div>

        <!-- Yes/No Questions -->
        <div class="mb-6">
            <h2 class="text-xl font-semibold mb-2">Yes/No Questions</h2>
            {% for question in yes_no_questions %}
                <label class="block font-medium">{{ question.question_text }}</label>
                <select name="yes_no_question{{ forloop.counter }}" class="w-full p-2 border border-gray-300 rounded mb-3">
                    <option value="">-- Choose an option --</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
            {% endfor %}
        </div>

        <!-- Income Questions -->
        <div class="mb-6">
            <h2 class="text-xl font-semibold mb-2">Income Information</h2>
            {% for question in income_questions %}
                <label for="income_question{{ forloop.counter }}" class="block font-medium">{{ question.question_text }}</label>
                <input class="w-full p-2 border border-gray-300 rounded mb-3"
                       id="income_question{{ forloop.counter }}"
                       name="income_question{{ forloop.counter }}"
                       type="text"
                       value="{% if question.question_text == 'Annual family income' %}{{ user_data.annual_family_income }}
                              {% elif question.question_text == 'Cadastral income from rental' %}{{ user_data.cadastral_income_rental }}
                              {% elif question.question_text == 'Cadastral income from business' %}{{ user_data.cadastral_income_business }}
                              {% elif question.question_text == 'Separable taxable incomes' %}{{ user_data.separable_taxable_incomes }}
                              {% elif question.question_text == 'Alimentation money' %}{{ user_data.alimentation_money }}
                              {% elif question.question_text == 'Living wages' %}{{ user_data.living_wages }}
                              {% elif question.question_text == 'Income replacement allowance' %}{{ user_data.income_replacement_allowance }}
                              {% elif question.question_text == 'Foreign incomes' %}{{ user_data.foreign_incomes }}
                              {% elif question.question_text == 'Study income' %}{{ user_data.study_income }}
                              {% endif %}">
            {% endfor %}
        </div>

        <!-- Submit -->
        <button type="submit"
                class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
            Continue to Financial Overview
        </button>
    </form>
</div>
{% endblock %}
